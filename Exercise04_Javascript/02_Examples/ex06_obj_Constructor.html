<html>
<head>
<script>

// WAYS OF CREATING OBJECTS ---
// NOTE THAT instanceof works for this way of creating objects.

// -----------------
// Constructor pattern
// -----------------

function Student () { // called a constructor
  this.name = "Tom";
  this.foo = function() {console.log(this.name + ": hi"); };
};

var stu1 = new Student(); // create a new object, assign this, do, return
stu1.name = "Sally";

console.log(this.name); // "Tom"
// this.foo(); // Throws TypeError: this.foo is not a function

console.log(JSON.stringify(stu1));
console.log(stu1 instanceof Student); // true
console.log(stu1 instanceof Object); // true


var stu2 = new Student();
console.log(JSON.stringify(stu2));

// this.foo(); // Throws TypeError: this.foo is not a function

// ONE PROBLEM: the function is duplicated!
console.log(stu1.foo === stu2.foo); // this is FALSE (i.e. methods are duplicated)

stu1.foo(); // "Sally: hi"
stu2.foo(); // "Tom: hi"

// TODO: Notice that functions are DUPLICATED in every instance using
// this pattern! That's why they are not equal.

// what happens if we do the following?
// Explain what is "this" in the below invocation.
// Answer: "this" now seems to refer to the global context, as we are able to call this.foo() and have it run
Student(); // call the function Student; what is "this"?
// TODO: uncomment the below!
console.log(this.name);
this.foo(); // "Tom: hi"

// Hopefully, now you understand why the "new" operator is needed!
// It creates an object and that object becomes the this for the
// constructor

// Javascript provides some ready made constructors 
// Object, Boolean, String, Number, 
// Array, Function, RegExp,
// Date

</script>
</head>
<body>
</body>
</html>
